#r8_Uw9YSTxtk0C5xakGsUBER44tsIxN19T1zv7Tf

import replicate
import os
import csv
import pandas as pd

data = pd.read_csv("linkedin-jobs.csv")

t1 = (data["Title"][210])
#print(t1)

d1 = (data["Description"][200])
#print(d1)


"""with open ('linkedin-jobs.csv', newline='') as csvfile:
    spamreader = csv.reader(csvfile, delimiter=' ', quotechar='|')
    for row in spamreader:
        print(', '.join(row))
"""
os.environ["REPLICATE_API_TOKEN"] = "r8_Uw9YSTxtk0C5xakGsUBER44tsIxN19T1zv7Tf"

def gptchecker(lst: list):
    for couple in lst:
        prompt_input = str(couple)
        
    output = replicate.run(
        "meta/llama-2-70b-chat:02e509c789964a7ea8736978a43525956ef40397be9033abf9fd2badfe68c9e3",
        input={
            "debug": False,
            "top_k": 50,
            "top_p": 1,
            "prompt": f"I am going to give you a job title and a job description as an array in the format [t, d], where t is the title and d is the description. I want you to output an array in the format [x, y, t], where x is a boolean whose value depends on if a given job description has a mention of some sort of degree in it (Bachelors, Masters, or any other educational requirement, etc...). If it does it is \"True\", if it doesn't it is \"False\", y is an array of all the undergraduate majors (in string format) mentioned within the job description (note: it can never be generic terms like \'bachelors\', or \'masters\', if you don't see a specific major then leave the \"y\" array empty.) and t is the title from the input array. Here's an example:\n\nInput = ['Biomedical Informatician', 'Job Description: \"The Office of the Director (OD), Division of Cancer Treatment and Diagnosis (DCTD), National Cancer Institute (NCI), is seeking an experienced and self-motivated candidate to fill a Biomedical Informatician vacancy.\n\n\nResponsibilities\n\nThe successful candidate will serve as a Biomedical Informatician in DCTD, with responsibility for working with other government and contract biomedical, informatics, statistical and clinical experts to conceive, plan, develop, implement, and evaluate biomedical informatics solutions to address existing and future clinical and pre-clinical cancer research requirements. Expertise and knowledge in biomedical informatics to manage projects involving the development of informatics solutions that support cancer clinical research programs and initiatives, is desired.\n\n\nQualifications\n\nApplicants must be U.S. citizens, with a Bachelor's or graduate/higher level degree in a major study in an academic field related to bioinformatics, data science, computer science, or health/allied sciences appropriate to the work of the position.\nExperience in developing software, databases, or portals that collect, process, store, integrate and perform computational analysis of biomedical data, particularly coming from multiple sources; identifying program needs and translating them into biomedical informatics solutions; evaluating the performance of existing biomedical informatics technology systems and programs relative to current and future requirements; developing and implementing pipelines to receive, assess, process and store data in systems; developing standard operating procedures for the acquisition, integration and analysis of clinical trial data, including laboratory and research assay results, multi-omics data, treatment and biospecimen collection/processing timelines, costs; and participating in the administration of biomedical informatics contracts.\n\n\nHow to Apply:\n\nThis is an exploratory ad to gauge interest and identify a possible candidate pool. Interested candidates may contact: Michael Difilippantonio: difilipm@mail.nih.gov\n\n\nThe vacancy announcement to fill this position will be posted within the next week on usajobs.gov']\n\nOutput = [True, [\"Bioinformatics\", \"Data science\", \"computer science\", \"health/allied sciences\"], 'Biomedical Informatician']\n\n\n\n\nHere's another example :\n\nInput: ['Senior Manager of NA Data Center Operations, Washi', 'Company:Cogent Communications is a global, Tier 1 facilities-based ISP, consistently ranked as one of the top five networks in the world and is publicly traded on the NASDAQ Stock Market under the ticker symbol CCOI. Cogent specializes in providing businesses with high speed Internet access and Ethernet transport services. Cogent's facilities-based, all-optical IP network backbone provides IP services in over 216 markets globally. Since its inception, Cogent has unleashed the benefits of IP technology, building one of the largest and highest capacity IP networks in the world. This network enables Cogent to offer large bandwidth connections at highly competitive prices. Cogent also offers superior customer support by virtue of its end-to-end control of service delivery and network monitoring. A generous base salary, structured tenure pay increases and an uncapped commissions plan offers you an unlimited earnings potential. A full benefits package takes effect within 30 days of employment. Matching 401k and stock options are also included.Responsibilities: Cogent Communications is seeking an enthusiastic professional to be Cogent’s new “Senior Manager of NA Data Center Operations”. The full-time position will be working out of the downtown Washington DC Office; it will also require some work travel. The position is for Monday-Friday, mostly during regular business hours work, but this would also be an on-call “24/7/365” position. The Senior Manager will oversee the day-to-day Data Center Operations, and will have most/all Data Center Staff reporting to him or her. The Cogent Data Center Operations Team is responsible for provisioning Work Orders, working on large/special projects when they arise, Managing/Scheduling/Overseeing maintenances & repair work with vendors/contractors, oversee and maintain security access control systems, working Support Tickets, run audits, and assisting Sales teams and Cogent NOC/Support with issues, customer related matters, questions, etc. The Manager will be required to make sure all assets of the NA Data Center Operation is running smoothly as possible. Be “2nd level” tier of escalation for data center issues, matters, etc; Be able to respond to issues, emergencies, and other matters when contacted via the Cogent NOC, Support Team, and/or Data Center team. Although “On-Call” would not require dispatching to a site, applicant must be available by phone after hours in these situations Will report to Director of Data Center Operations/Field Engineering; assist with large projects such as new site acquisitions and build outs. With applicant’s knowledge of power and infrastructure, Senior Manager will also assist the Field Team with related projects. Know how to calculate/document power requirements for both data centers and Network installations and augmentations. Manage and track internal space and power requests at hubs sites and colocation facilities. Identify power and infrastructure requirements at major hub sites including incoming utility power feeds, generator sizing, internal switching and cabling, and battery systems. Manage, track and optimize existing space and power inventory Maintain proficiency in up-to-date technological developments in electrical power systems ( AC and DC), cable management systems and equipment infrastructure. Qualifications: Leadership skills to lead a Data Center Team, overseeing day-to-day activities of the North American Data Centers and the team members that handle them. 5+ years’ experience with central office and/or data center infrastructure; specifically with facilities engineering and data center operations. Person must be able to multi-task and project manage daily operations for the data centers. Project manage mid-to-large sized projects for the NA Data Center Operations Team Must have knowledge of facilities engineering and critical equipment in the data center ( Working knowledge of AC power, generators, DC power systems, and battery backups). Must have knowledge of cabling and basic internet processes. A flexibility to travel to data centers in North America ( The ability to travel 20% of the time) Project management experience. Strong problem solving and trouble shooting skills High-energy individual with interpersonal skills to work effectively with others, motivate peers, and drive project to completion Preferred Bachelor's degree in a technical field or equivalent experience, certifications, or training Work Environment:To best support your success, this is an in-office position five days a week, allowing for focused mentorship, training and personal coaching.COVID-19 Policy:Cogent has adopted a mandatory vaccination and booster policy which requires all U.S. employees to be fully vaccinated ( including booster shots when eligible) against COVID-19. Prior to beginning employment, new employees must provide proof of vaccination or apply for and receive an accommodation to be exempt from the policy.By submitting an application or resume for this position, I understand that is an in-office position and agree to abide Cogent’s mandatory vaccination policy.To apply for the Senior Manager of NA Data Center Operations position, please submit your resume and cover letter to careers@cogentco.com .Cogent Communications is an Equal Opportunity Employer.']\n\nOutput = [True, [], 'Senior Manager of NA Data Center Operations, Washi']\n\n\nNow, give me an output for this input: \nInput = {prompt_input}, also I don't need any explanation just the output",
            "temperature": 0.5,
            "system_prompt": "You are a helpful, respectful and honest assistant. You are exceptionally good at parsing through job descriptions and extracting meaningful data. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.\n\nIf a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.",
            "max_new_tokens": 500,
            "min_new_tokens": -1
        }
)
    print(lst[0])
    full_response = ""
    for item in output:
        full_response += item
        
    print(full_response)


'''output = replicate.run(
    "meta/llama-2-70b-chat:02e509c789964a7ea8736978a43525956ef40397be9033abf9fd2badfe68c9e3",
    input={
        "debug": False,
        "top_k": 50,
        "top_p": 1,
        "prompt": "I am going to give you a job title and a job description as an array in the format [t, d], where t is the title and d is the description. I want you to output an array in the format [x, y, t], where x is a boolean whose value depends on if a given job description has a mention of some sort of degree in it (Bachelors, Masters, or any other educational requirement, etc...). If it does it is \"True\", if it doesn't it is \"False\", y is an array of all the undergraduate majors (in string format) mentioned within the job description and t is the title from the input array. Here's an example:\n\nInput = ['Biomedical Informatician', 'Job Description: \"The Office of the Director (OD), Division of Cancer Treatment and Diagnosis (DCTD), National Cancer Institute (NCI), is seeking an experienced and self-motivated candidate to fill a Biomedical Informatician vacancy.\n\n\nResponsibilities\n\nThe successful candidate will serve as a Biomedical Informatician in DCTD, with responsibility for working with other government and contract biomedical, informatics, statistical and clinical experts to conceive, plan, develop, implement, and evaluate biomedical informatics solutions to address existing and future clinical and pre-clinical cancer research requirements. Expertise and knowledge in biomedical informatics to manage projects involving the development of informatics solutions that support cancer clinical research programs and initiatives, is desired.\n\n\nQualifications\n\nApplicants must be U.S. citizens, with a Bachelor's or graduate/higher level degree in a major study in an academic field related to bioinformatics, data science, computer science, or health/allied sciences appropriate to the work of the position.\nExperience in developing software, databases, or portals that collect, process, store, integrate and perform computational analysis of biomedical data, particularly coming from multiple sources; identifying program needs and translating them into biomedical informatics solutions; evaluating the performance of existing biomedical informatics technology systems and programs relative to current and future requirements; developing and implementing pipelines to receive, assess, process and store data in systems; developing standard operating procedures for the acquisition, integration and analysis of clinical trial data, including laboratory and research assay results, multi-omics data, treatment and biospecimen collection/processing timelines, costs; and participating in the administration of biomedical informatics contracts.\n\n\nHow to Apply:\n\nThis is an exploratory ad to gauge interest and identify a possible candidate pool. Interested candidates may contact: Michael Difilippantonio: difilipm@mail.nih.gov\n\n\nThe vacancy announcement to fill this position will be posted within the next week on usajobs.gov']\n\nOutput = [True, [\"Bioinformatics\", \"Data science\", \"computer science\", \"health/allied sciences\"], 'Biomedical Informatician']\n\n\n\n\n\nNow, give me an output for this input: \nInput = ['Manager of Clinical Informatics', 'About the job\nPhoebe Putney Health System is seeking an innovative Manager of Clinical Informatics. This person performs supervisory activities such as personnel management, budgeting, project management and work order activities. Assists with hiring, time management, productivity, provides direction and evaluates employees. Assigns tasks to staff. Plans, organizes and coordinates the application support activities for two or more software applications. Coordinates the interactions between the users of computer applications, the Information Systems/Clinical Informatics Departments and related vendor support personnel. Is responsible for implementation of assigned new applications and ongoing system enhancements, assisting users in making the most effective use of computer applications through training, file maintenance, testing, system monitoring, problem resolution and validate configuration of applications. Prepares documentation for assigned applications. Recommends software solutions, including both commercial software packages and in-house developed applications, based on user requirements. Generates and analyzes documents, charts and/or diagrams of business problems to be programmed or addressed via systems acquisitions. Assists in developing project cost and benefit estimates to establish project worth, including the development of alternative considerations leading to recommendations for new systems or systems changes. Assist in developing departmental policies and standards related to use of systems and software. All activities will be performed in support of the strategy, vision, and values of Phoebe. Nothing in this job description restricts management's right to assign or reassign duties and responsibilities to this job at any time. All activities must be in compliance with Equal Employment Opportunity laws, HIPAA, ERISA, and other regulations, as appropriate.\n\n\nEDUCATION REQUIREMENTS\n4 year / Bachelor's Degree in Health Science, computer science, information systems technology, or related discipline (Required)\nMaster's Degree in Business Administration, Information Systems or related discipline (Preferred)\n\n\nEXPERIENCE REQUIREMENTS\n4 - 5 years Proficiency in the use and understanding of two or more applications currently used in healthcare settings. (Required)\n4 - 5 years Experience in implementing and/or upgrading an application in a healthcare setting. (Required)\n2 - 3 years Understanding of the processes related with the department/s and application that the analyst manages. (Required)\n1 - 2 years Supervision of other analysts in the implementation or upgrade of a minimum of two projects (Preferred)\n2 - 3 years Project management experience in a healthcare setting. (Preferred)\n\n\nCERTIFICATIONS AND LICENSURES\nPreferred Certifications/Licensures: Project Management Professional (PMP), Current Georgia State Licensure in healthcare related field']\n\nI don't need any explanation just the output.",
        "temperature": 0.5,
        "system_prompt": "You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.\n\nIf a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.",
        "max_new_tokens": 500,
        "min_new_tokens": -1
    }
)
full_response =""

for item in output:
    full_response+= item
    
print (full_response)
'''


gptchecker([t1,d1])